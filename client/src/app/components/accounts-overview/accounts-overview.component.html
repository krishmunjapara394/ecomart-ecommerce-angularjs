<!-- Accounts Overview - Redesigned -->
<div>
  <!-- Header -->
  <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-6 gap-4">
    <div>
      <h2 class="text-2xl font-bold text-slate-800">User Management</h2>
      <p class="text-sm text-slate-500 mt-1">Manage all registered users and their accounts</p>
    </div>
    <div class="flex items-center gap-3">
      <div class="flex items-center gap-2 px-4 py-2.5 rounded-xl bg-white border border-slate-200 shadow-sm focus-within:ring-2 focus-within:ring-emerald-500/20 focus-within:border-emerald-400 transition-all">
        <span class="material-icons text-slate-400 text-lg">search</span>
        <input
          type="text"
          [(ngModel)]="searchTerm"
          (ngModel)="onSearch()"
          (input)="onSearch()"
          placeholder="Search users..."
          class="text-sm text-slate-700 placeholder-slate-400 bg-transparent border-none outline-none w-48"
        />
        <button *ngIf="searchTerm" (click)="clearSearch()" class="text-slate-400 hover:text-slate-600 transition-colors">
          <span class="material-icons text-base">close</span>
        </button>
      </div>
      <div class="px-3 py-2 rounded-xl bg-emerald-50 text-emerald-700 text-sm font-medium">
        {{ filteredUsers.length }} {{ searchTerm ? 'found' : 'Users' }}
      </div>
    </div>
  </div>

  <!-- Users Table -->
  <div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden">
    <div class="overflow-x-auto">
      <table class="min-w-full">
        <thead>
          <tr class="bg-slate-50 border-b border-slate-200">
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">User</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Username</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Contact</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Role</th>
            <th class="px-6 py-4 text-left text-xs font-semibold text-slate-500 uppercase tracking-wider">Joined</th>
            <th class="px-6 py-4 text-right text-xs font-semibold text-slate-500 uppercase tracking-wider">Actions</th>
          </tr>
        </thead>
        <tbody class="divide-y divide-slate-100">
          <tr *ngFor="let user of displayedUsers" class="hover:bg-slate-50/50 transition-colors">
            <!-- User Name + Avatar -->
            <td class="px-6 py-4">
              <div class="flex items-center gap-3">
                <div class="w-9 h-9 rounded-lg bg-gradient-to-br from-emerald-400 to-cyan-500 flex items-center justify-center flex-shrink-0">
                  <span class="text-white font-bold text-xs">{{ user.fullName?.charAt(0) || '?' }}</span>
                </div>
                <span class="text-sm font-medium text-slate-800 truncate max-w-[160px]">{{ user.fullName }}</span>
              </div>
            </td>
            <!-- Username -->
            <td class="px-6 py-4">
              <span class="text-sm text-slate-600 font-mono bg-slate-100 px-2 py-0.5 rounded">{{ user.username }}</span>
            </td>
            <!-- Contact -->
            <td class="px-6 py-4">
              <div class="text-sm text-slate-600">{{ user.email }}</div>
              <div class="text-xs text-slate-400 mt-0.5">{{ user.phone }}</div>
            </td>
            <!-- Role -->
            <td class="px-6 py-4">
              <span
                class="inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium"
                [ngClass]="{
                  'bg-purple-100 text-purple-700': user.role === 'admin',
                  'bg-blue-100 text-blue-700': user.role === 'user'
                }"
              >
                <span class="w-1.5 h-1.5 rounded-full mr-1.5"
                  [ngClass]="{'bg-purple-500': user.role === 'admin', 'bg-blue-500': user.role === 'user'}"></span>
                {{ user.role }}
              </span>
            </td>
            <!-- Joined -->
            <td class="px-6 py-4 text-sm text-slate-500">
              {{ user.createdAt | slice:0:10 }}
            </td>
            <!-- Actions -->
            <td class="px-6 py-4 text-right">
              <div class="flex items-center justify-end gap-2">
                <button
                  (click)="openDialog(user)"
                  class="p-2 rounded-lg text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 transition-colors"
                  title="Edit User"
                >
                  <span class="material-icons text-lg">edit</span>
                </button>
                <button
                  (click)="deleteUser(user)"
                  class="p-2 rounded-lg text-slate-400 hover:text-red-600 hover:bg-red-50 transition-colors"
                  title="Delete User"
                >
                  <span class="material-icons text-lg">delete</span>
                </button>
              </div>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- Pagination -->
    <div class="flex items-center justify-between px-6 py-4 border-t border-slate-200 bg-slate-50/50">
      <p class="text-sm text-slate-500">
        Showing {{ filteredUsers.length === 0 ? 0 : currentPage * pageSize + 1 }} - {{ (currentPage + 1) * pageSize > filteredUsers.length ? filteredUsers.length : (currentPage + 1) * pageSize }} of {{ filteredUsers.length }} users
      </p>
      <div class="flex items-center gap-2">
        <button
          class="px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1"
          [ngClass]="{
            'bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 shadow-sm': currentPage > 0,
            'bg-slate-100 text-slate-400 cursor-not-allowed': currentPage === 0
          }"
          [disabled]="currentPage === 0"
          (click)="prevPage()"
        >
          <span class="material-icons text-lg">chevron_left</span>
          Previous
        </button>
        <span class="px-3 py-2 rounded-lg bg-slate-800 text-white text-sm font-medium min-w-[36px] text-center">{{ currentPage + 1 }}</span>
        <button
          class="px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center gap-1"
          [ngClass]="{
            'bg-white border border-slate-200 text-slate-700 hover:bg-slate-50 shadow-sm': displayedUsers.length >= pageSize && (currentPage + 1) * pageSize < filteredUsers.length,
            'bg-slate-100 text-slate-400 cursor-not-allowed': displayedUsers.length < pageSize || (currentPage + 1) * pageSize >= filteredUsers.length
          }"
          [disabled]="displayedUsers.length < pageSize || (currentPage + 1) * pageSize >= filteredUsers.length"
          (click)="nextPage()"
        >
          Next
          <span class="material-icons text-lg">chevron_right</span>
        </button>
      </div>
    </div>
  </div>
</div>
