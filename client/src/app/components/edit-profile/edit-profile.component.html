@if (isLoading) {
<app-loading-spinner></app-loading-spinner>
}

<div class="rounded-xl border border-gray-100 bg-white p-6 shadow-sm">
  <div class="border-b border-gray-100 pb-4 mb-6">
    <h2 class="text-lg font-bold text-gray-800">Edit Profile</h2>
    <p class="text-sm text-gray-400 mt-0.5">Update your personal information and profile photo</p>
  </div>

  <!-- Avatar Upload -->
  <div class="mb-6 rounded-lg bg-gray-50 p-5">
    <p class="text-sm font-semibold text-gray-700 mb-3">Profile Photo</p>
    <div class="flex items-center gap-5">
      <img class="h-20 w-20 rounded-full border-2 border-violet-100 object-cover shadow-sm" [src]="userInfo.image"
        [alt]="userForm.get('fullName')?.value" />
      <div>
        <label
          class="inline-flex cursor-pointer items-center gap-2 rounded-lg border border-gray-200 bg-white px-4 py-2 text-sm font-medium text-gray-700 shadow-sm transition-all hover:bg-gray-50 hover:shadow-md">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5"
            stroke="currentColor" class="h-4 w-4">
            <path stroke-linecap="round" stroke-linejoin="round"
              d="M3 16.5v2.25A2.25 2.25 0 005.25 21h13.5A2.25 2.25 0 0021 18.75V16.5m-13.5-9L12 3m0 0l4.5 4.5M12 3v13.5" />
          </svg>
          Upload Photo
          <input type="file" class="hidden" (change)="onFileChange($event)" accept="image/*" />
        </label>
        <p class="mt-2 text-xs text-gray-400">JPG, PNG or GIF. Max 2MB.</p>
      </div>
    </div>
  </div>

  <!-- Edit Form -->
  <form [formGroup]="userForm" (ngSubmit)="onSubmit()" class="space-y-5">
    <div class="grid grid-cols-1 gap-5 sm:grid-cols-2">
      <div>
        <label for="fullName" class="mb-1.5 block text-sm font-medium text-gray-700">
          Full Name <span class="text-red-500">*</span>
        </label>
        <input formControlName="fullName" type="text" id="fullName" placeholder="John Doe"
          class="w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm text-gray-700 outline-none transition-all focus:border-violet-400 focus:ring-2 focus:ring-violet-100" />
      </div>
      <div>
        <label for="email" class="mb-1.5 block text-sm font-medium text-gray-700">
          Email <span class="text-red-500">*</span>
        </label>
        <input formControlName="email" type="email" id="email" placeholder="john@example.com"
          class="w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm text-gray-700 outline-none transition-all focus:border-violet-400 focus:ring-2 focus:ring-violet-100" />
      </div>
      <div>
        <label for="username" class="mb-1.5 block text-sm font-medium text-gray-700">
          Username <span class="text-red-500">*</span>
        </label>
        <input formControlName="username" type="text" id="username"
          class="w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm text-gray-700 outline-none transition-all focus:border-violet-400 focus:ring-2 focus:ring-violet-100" />
      </div>
      <div>
        <label for="phone" class="mb-1.5 block text-sm font-medium text-gray-700">
          Phone <span class="text-red-500">*</span>
        </label>
        <input formControlName="phone" type="text" id="phone"
          class="w-full rounded-lg border border-gray-200 px-4 py-2.5 text-sm text-gray-700 outline-none transition-all focus:border-violet-400 focus:ring-2 focus:ring-violet-100" />
      </div>
    </div>

    <div class="flex items-center gap-3 border-t border-gray-100 pt-5">
      <button type="submit"
        class="inline-flex cursor-pointer items-center gap-2 rounded-lg bg-violet-900 px-6 py-2.5 text-sm font-medium text-white shadow-sm transition-all hover:bg-violet-800 hover:shadow-md">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"
          class="h-4 w-4">
          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12.75l6 6 9-13.5" />
        </svg>
        Save Changes
      </button>
      <a routerLink="/profile/information"
        class="inline-flex cursor-pointer items-center rounded-lg border border-gray-200 bg-white px-6 py-2.5 text-sm font-medium text-gray-600 shadow-sm transition-all hover:bg-gray-50">
        Cancel
      </a>
    </div>
  </form>
</div>